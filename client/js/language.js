// Language translations
const translations = {
    // App title
    appTitle: {
        en: "Try NOT To WIN",
        ar: "حاول ألا تفوز"
    },
    gameTitle: {
        en: "Try NOT To WIN",
        ar: "حاول ألا تفوز"
    },
    gameSubtitleNew: {
        en: "Reverse Survival Game: Shrink to Win!",
        ar: "لعبة البقاء العكسية: صغّر حجمك لتفوز!"
    },
    
    // Main menu
    playSolo: {
        en: "Play Solo",
        ar: "اللعب الفردي"
    },
    playOnline: {
        en: "Play Online",
        ar: "اللعب عبر الإنترنت"
    },
    leaderboard: {
        en: "Leaderboard",
        ar: "لوحة المتصدرين"
    },
    shop: {
        en: "Shop",
        ar: "المتجر"
    },
    tasks: {
        en: "Tasks",
        ar: "المهام"
    },
    profile: {
        en: "Profile",
        ar: "الملف الشخصي"
    },
    
    // Multiplayer
    multiplayerMenuTitle: {
        en: "Online Play",
        ar: "اللعب عبر الإنترنت"
    },
    createRoom: {
        en: "Create Room",
        ar: "إنشاء غرفة"
    },
    joinRoomByCode: {
        en: "Join by Code",
        ar: "الانضمام بكود"
    },
    randomMatch: {
        en: "Random Match",
        ar: "انضمام عشوائي"
    },
    enterRoomCodePlaceholder: {
        en: "Enter room code",
        ar: "أدخل كود الغرفة"
    },
    
    // Lobby
    lobbyTitle: {
        en: "Waiting Room",
        ar: "غرفة الانتظار"
    },
    roomCodeLabel: {
        en: "Room Code:",
        ar: "كود الغرفة:"
    },
    playersInLobby: {
        en: "Players:",
        ar: "اللاعبون:"
    },
    ready: {
        en: "Ready",
        ar: "جاهز"
    },
    notReady: {
        en: "Not Ready",
        ar: "غير جاهز"
    },
    startGameHost: {
        en: "Start Game (Host)",
        ar: "بدء اللعبة (للمضيف)"
    },
    leaveRoom: {
        en: "Leave Room",
        ar: "مغادرة الغرفة"
    },
    
    // Game
    size: {
        en: "Size",
        ar: "الحجم"
    },
    youWin: {
        en: "You Win!",
        ar: "لقد فزت!"
    },
    wins: {
        en: "wins!",
        ar: "يفوز!"
    },
    
    // Profile
    profileTitle: {
        en: "Profile",
        ar: "الملف الشخصي"
    },
    profileNameLabel: {
        en: "Name:",
        ar: "الاسم:"
    },
    settings: {
        en: "Settings",
        ar: "الإعدادات"
    },
    
    // Tasks
    tasksTitle: {
        en: "Tasks",
        ar: "المهام"
    },
    task1: {
        en: "Collect 10 poisons",
        ar: "اجمع 10 سموم"
    },
    task2: {
        en: "Win 3 games",
        ar: "فز في 3 مباريات"
    },
    task3: {
        en: "Play 5 multiplayer games",
        ar: "العب 5 مباريات متعددة اللاعبين"
    },
    
    // Shop
    shopTitle: {
        en: "Shop",
        ar: "المتجر"
    },
    skinRed: {
        en: "Red",
        ar: "أحمر"
    },
    skinBlue: {
        en: "Blue",
        ar: "أزرق"
    },
    skinGreen: {
        en: "Green",
        ar: "أخضر"
    },
    skinPurple: {
        en: "Purple",
        ar: "بنفسجي"
    },
    
    // Misc
    backToMain: {
        en: "Back to Main",
        ar: "العودة للرئيسية"
    },
    enterYourName: {
        en: "Enter Your Name",
        ar: "أدخل اسمك"
    },
    namePlaceholder: {
        en: "Player Name",
        ar: "اسم اللاعب"
    },
    startPlaying: {
        en: "Start Playing",
        ar: "ابدأ اللعب"
    },
    enterValidName: {
        en: "Please enter a valid name",
        ar: "الرجاء إدخال اسم صحيح"
    },
    currencyLabel: {
        en: "Coins",
        ar: "عملات"
    },
    
    // Powerups
    reverseControls: {
        en: "Controls Reversed!",
        ar: "تم عكس التحكم!"
    },
    swappedSizesWith: {
        en: "Swapped sizes with",
        ar: "تم تبديل الحجم مع"
    },
    sizeSwappedBy: {
        en: "Size swapped by",
        ar: "تم تبديل حجمك بواسطة"
    },
    controllingPlayer: {
        en: "Controlling",
        ar: "تتحكم في"
    },
    controlledBy: {
        en: "Controlled by",
        ar: "يتحكم بك"
    },
    
    // Errors and notifications
    connectionLost: {
        en: "Connection lost. Please refresh.",
        ar: "انقطع الاتصال. يرجى تحديث الصفحة."
    },
    creatingRoom: {
        en: "Creating room...",
        ar: "جاري إنشاء الغرفة..."
    },
    joiningRoom: {
        en: "Joining room...",
        ar: "جاري الانضمام للغرفة..."
    },
    findingMatch: {
        en: "Finding match...",
        ar: "جاري البحث عن مباراة..."
    },
    alertEnterRoomCode: {
        en: "Please enter room code",
        ar: "الرجاء إدخال كود الغرفة"
    },
    roomNotFound: {
        en: "Room not found or is full.",
        ar: "الغرفة غير موجودة أو ممتلئة."
    },
    errorCreatingRoom: {
        en: "Error creating room. Please try again.",
        ar: "خطأ في إنشاء الغرفة. يرجى المحاولة مرة أخرى."
    },
    errorJoiningRoom: {
        en: "Error joining room. Check code or try again.",
        ar: "خطأ في الانضمام للغرفة. تحقق من الكود أو حاول مرة أخرى."
    },
    youAreNowHost: {
        en: "You are now the host",
        ar: "أنت الآن المضيف"
    },
    avatarChangeNotAvailable: {
        en: "Avatar change not available in this version",
        ar: "تغيير الصورة الرمزية غير متاح في هذه النسخة"
    },
    leaderboardEmpty: {
        en: "No leaderboard data available",
        ar: "لا توجد بيانات متصدرين حالياً"
    },
    rotateDevicePrompt: {
        en: "Please rotate your device to landscape mode to play.",
        ar: "الرجاء تدوير جهازك إلى الوضع الأفقي للعب."
    },
    rotateDevicePromptEn: {
        en: "(Please rotate your device to landscape mode to play.)",
        ar: "(Please rotate your device to landscape mode to play.)"
    }
};

// Current language
let currentLang = "ar"; // Default to Arabic

// Apply translations to all elements with data-translate-key attribute
function applyTranslations() {
    const elements = document.querySelectorAll("[data-translate-key]");
    elements.forEach(element => {
        const key = element.getAttribute("data-translate-key");
        if (translations[key] && translations[key][currentLang]) {
            element.textContent = translations[key][currentLang];
        }
    });
    
    // Apply placeholder translations
    const placeholderElements = document.querySelectorAll("[data-translate-key-placeholder]");
    placeholderElements.forEach(element => {
        const key = element.getAttribute("data-translate-key-placeholder");
        if (translations[key] && translations[key][currentLang]) {
            element.placeholder = translations[key][currentLang];
        }
    });
    
    // Apply title translations
    const titleElements = document.querySelectorAll("[data-translate-key-title]");
    titleElements.forEach(element => {
        const key = element.getAttribute("data-translate-key-title");
        if (translations[key] && translations[key][currentLang]) {
            element.title = translations[key][currentLang];
        }
    });
    
    // Update document title
    if (translations.appTitle && translations.appTitle[currentLang]) {
        document.title = translations.appTitle[currentLang];
    }
}

// Switch language
function switchLanguage(lang) {
    if (lang === "ar" || lang === "en") {
        currentLang = lang;
        document.documentElement.lang = lang;
        document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
        applyTranslations();
    }
}
